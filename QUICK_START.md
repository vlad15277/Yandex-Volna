# Быстрый старт

Пошаговая инструкция для запуска Discord бота Яндекс.Музыки.

## 1. Подготовка

### Установите Python 3.8+
Убедитесь, что у вас установлен Python 3.8 или новее:
```bash
python --version
```

### Установите FFmpeg
Следуйте инструкциям в файле `FFMPEG_SETUP.md` для вашей операционной системы.

## 2. Настройка Discord бота

1. Перейдите на [Discord Developer Portal](https://discord.com/developers/applications)
2. Нажмите "New Application" и дайте название вашему боту
3. В разделе "Bot" нажмите "Add Bot"
4. Скопируйте токен бота (понадобится позже)
5. В разделе "OAuth2" → "URL Generator":
   - Выберите "bot" в Scopes
   - Выберите права: "Send Messages", "Connect", "Speak", "Use Voice Activity"
   - Скопируйте сгенерированную ссылку и добавьте бота на сервер
6. В разделе "Bot" → "Privileged Gateway Intents":
   - ✅ Включите "Message Content Intent" (если не включен)

## 3. Настройка проекта

### Создайте виртуальное окружение
```bash
python -m venv venv
venv\Scripts\activate  # Windows
# или
source venv/bin/activate  # Linux/Mac
```

### Установите зависимости
```bash
pip install -r requirements.txt
```

### Создайте файл .env
Скопируйте содержимое `env_example.txt` в новый файл `.env` и заполните:

```env
DISCORD_TOKEN=ваш_токен_бота_здесь
YANDEX_TOKEN=ваш_токен_яндекс_музыки
PREFIX=!
MAX_QUEUE_SIZE=50
```

**Для получения токена Яндекс.Музыки:**
1. Откройте [music.yandex.ru](https://music.yandex.ru) в браузере
2. Войдите в свой аккаунт
3. Нажмите `F12` (инструменты разработчика)
4. Перейдите на вкладку "Application" → "Local Storage" → "https://music.yandex.ru"
5. Найдите ключ `"access_token"` и скопируйте его значение
6. Подробные инструкции в файле `YANDEX_TOKEN_GUIDE.md`

## 4. Запуск

### Проверьте все требования
```bash
python run.py
```

Если все настроено правильно, бот запустится и подключится к Discord.

## 5. Использование

1. Пригласите бота в голосовой канал
2. Используйте команды:

```
!play песня название
!mywave
!playlist название плейлиста
!liked
!help
```

## Устранение проблем

### "DISCORD_TOKEN не найден"
- Убедитесь, что файл `.env` создан и содержит правильный токен
- Проверьте, что токен скопирован полностью

### "Ошибка авторизации в Яндекс.Музыке"
- Проверьте токен в файле `.env`
- Убедитесь, что токен действителен и не истек
- Убедитесь, что у вас есть активная подписка Яндекс.Музыки

### "ffmpeg не найден"
- Установите FFmpeg согласно инструкциям в `FFMPEG_SETUP.md`
- Убедитесь, что FFmpeg добавлен в PATH

### Бот не подключается к голосовому каналу
- Проверьте права бота на сервере
- Убедитесь, что бот имеет права "Connect" и "Speak"

## Полезные команды

```bash
# Проверка версии Python
python --version

# Проверка установки FFmpeg
ffmpeg -version

# Проверка установленных пакетов
pip list

# Активация виртуального окружения (Windows)
venv\Scripts\activate

# Активация виртуального окружения (Linux/Mac)
source venv/bin/activate
```

## Поддержка

Если у вас возникли проблемы:
1. Проверьте логи в файле `bot.log`
2. Убедитесь, что все зависимости установлены
3. Проверьте права бота на сервере Discord
4. Убедитесь, что у вас есть активная подписка Яндекс.Музыки
